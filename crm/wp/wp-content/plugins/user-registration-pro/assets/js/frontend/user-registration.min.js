function ur_includes(e,r){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)if(e[t]===r)return!0;return!1}!function(m){var e=function(){var u=user_registration_params.ursL10n;m.fn.ur_form_submission=function(){return this.each(function(){var p=m(this),o=[],d=user_registration_params.form_required_fields,c={init:function(){},get_form_data:function(e){if(e===p.closest(".ur-frontend-form").attr("id")||m(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")){var a=this,i=[],e=c.separate_form_handler(""),s=new Array;m.each(e,function(){var e,r,t=m(this).attr("name");c.separate_form_handler('[name="'+t+'"]').length<2?(e=a.get_fieldwise_data(m(this)),r=document.querySelector(".field-invite_code"),"invite_code"===e.field_name&&"none"===r.style.display||i.push(e)):m.inArray(t,s)<0&&s.push(t)});for(var r=0;r<s.length;r++){var t=c.separate_form_handler('[name="'+s[r]+'"]'),n=(t.get(0).tagName.toLowerCase(),"undefined"!==t.eq(0).attr("type")?t.eq(0).attr("type"):"null"),o=new Array;if(m.each(t,function(){var e=m(this),r="";switch(e.get(0).tagName.toLowerCase()){case"input":switch(n){case"checkbox":case"radio":r=e.prop("checked")?e.val():"";break;default:r=e.val()}break;case"select":case"textarea":r=e.val()}""!==r&&o.push(r)}),"checkbox"==n)if("multiple_choice"==t.eq(0).attr("data-field"))for(var d=o,u=0,f=0;f<d.length;f++)u+=d[f]<<0;else var u=JSON.stringify(o);else u="radio"==n?o[0]:t.val();var l=(l=s[r]).replace("[]",""),l={value:u,field_type:n,label:t.eq(0).attr("data-label"),field_name:l};i.push(l)}return m(document).trigger("user_registration_frontend_form_data_filter",[i]),i}},get_fieldwise_data:function(e){var r={},t=e.get(0).tagName.toLowerCase(),a="undefined"!==e.attr("name")?e.attr("name"):"null",i=[];m(".field-phone").each(function(){var e=m(this).find(".form-row").attr("id");m(this).find(".form-row").find("#"+e).hasClass("ur-smart-phone-field")&&i.push(m(this).find(".form-row").attr("id"))});var s="undefined"!==e.attr("type")?e.attr("type"):"null",n=e.get(0).className.split(" ")[0];switch(r.value="",t){case"input":switch(s){case"checkbox":case"radio":r.value=e.prop("checked")?e.val():"";break;default:r.value=e.val()}ur_includes(i,a)&&(r.value=e.siblings('input[type="hidden"]').val());break;case"select":r.value=e.val();break;case"textarea":"wysiwyg"===n&&tinyMCE.triggerSave(),r.value=e.val()}return m(document).trigger("user_registration_frontend_form_data_render",[e,r]),r.field_type="undefined"!==e.eq(0).attr("type")?e.eq(0).attr("type"):"null",e.attr("data-label")!==undefined?r.label=e.attr("data-label"):e.prev().length&&"label"===e.prev().get(0).tagName.toLowerCase()?r.label=e.prev().text():r.label=r.field_type,e.attr("name")!==undefined&&""!==e.attr("name")?(r.field_name=e.attr("name"),r.field_name=r.field_name.replace("[]","")):r.field_name="",0<=m.inArray(r.field_name,d.join(",").trim())&&o.push(r.field_name),r},show_message:function(e,r,t,a){var i;t.closest(".user-registration").find(".ur-message").remove(),m(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")?((i=m('<div class="user-registration-'+r+'"/>')).append(e),m(".user-registration").find(".user-registration-MyAccount-navigation").length?i.insertBefore(".user-registration-MyAccount-navigation"):i.insertBefore(".ur-frontend-form")):((i=m('<div class="ur-message user-registration-'+r+'" id="ur-submit-message-node"/>')).append(e),"1"===a?t.append(i):t.prepend(i))},separate_form_handler:function(e){return m(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")?p.find(".user-registration-profile-fields").find(".ur-edit-profile-field"+e):p.closest(".ur-frontend-form").find(".ur-form-grid").find(".ur-frontend-field"+e)},missing_attachment_handler:function(e){var r=[];if(1<=e.length){e.each(function(){var e=m(this).attr("id");-1===m.inArray(e,r)&&r.push(e)});for(var t=0;t<r.length;t++){for(var a=m("#"+r[t]).val().split(","),i=a.length;0<=i;i--)m.isNumeric(a[i])||a.splice(i,1);m("#"+r[t]).val(a)}}}},e={init:function(){this.form_submit_event(),this.edit_profile_event()},form_submit_event:function(){m(".ur-frontend-form").each(function(){m(this).find("form.register").off("submit").on("submit",function(e){e.preventDefault();var n=m(this);if(m.extend(m.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields}),0<n.find(".user-registration-password-strength").length){var e=n.find(".user-registration-password-strength").attr("data-current-strength"),r=n.find(".user-registration-password-strength").attr("data-min-strength");if(parseInt(e,0)<parseInt(r,0))return""!=n.find("#user_pass").val()&&(n.find("#user_pass_error").remove(),t='<label id="user_pass_error" class="user-registration-error" for="user_pass">'+u.password_strength_error+".</label>",n.find(".user-registration-password-hint").after(t),n.find("#user_pass").attr("aria-invalid",!0),n.find("#user_pass").trigger("focus")),!1}r=n.find(".ur-smart-phone-field");if("true"===r.attr("aria-invalid")){(s=r.closest("p.form-row")).find("#"+r.data("id")+"-error").remove();var t='<label id="'+r.data("id")+'-error" class="user-registration-error" for="'+r.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return s.append(t),s.find("#"+r.data("id")).attr("aria-invalid",!0),!0}var a,r=n.find(".urfu-file-input");if(c.missing_attachment_handler(r),1===n.find(".uraf-profile-picture-upload").find(".user-registration-error").length&&(i=n.find(".uraf-profile-picture-upload").find(".uraf-profile-picture-input"),(s=n.find(".uraf-profile-picture-upload")).find("#"+i.attr("name")+"-error").remove(),s.find(".uraf-profile-picture-file-error").remove(),o='<label id="'+i.attr("name")+'-error" class="user-registration-error" for="'+i.attr("name")+'">'+user_registration_params.message_required_fields+"</label>",s.find("button.wp_uraf_profile_picture_upload").after(o)),n.valid()){n.find(".ur-submit-button").prop("disabled",!0);var i=0,s="0",o=n.find('[name="g-recaptcha-response"]').val();try{a=JSON.stringify(c.get_form_data(n.closest(".ur-frontend-form").attr("id")))}catch(d){a=""}1===m(this).closest("form").find('input[name="ur-user-form-id"]').length&&(i=m(this).closest("form").find('input[name="ur-user-form-id"]').val()),1===m(this).closest("form").find('input[name="ur_frontend_form_nonce"]').length&&(s=m(this).closest("form").find('input[name="ur_frontend_form_nonce"]').val());i={action:"user_registration_user_form_submit",security:user_registration_params.user_registration_form_data_save,form_data:a,captchaResponse:o,form_id:i,ur_frontend_form_nonce:s},s={};if(m(document).trigger("user_registration_frontend_before_form_submit",[i,n,s]),"undefined"!=typeof s.message&&""!==s.message)return c.show_message("<p>"+s.message+"</p>","error",n,"1"),void n.find(".ur-submit-button").prop("disabled",!1);n.find(".ur-submit-button").find("span").addClass("ur-front-spinner"),m.ajax({url:user_registration_params.ajax_url,data:i,type:"POST","async":!0,complete:function(e){var r=[];if(r.status=!1,m(document).trigger("user_registration_frontend_before_ajax_complete_success_message",[e,r]),!r.status){n.find(".ur-submit-button").find("span").removeClass("ur-front-spinner");var t=n.find('input[name="ur-redirect-url"]').val(),a=m('<ul class=""/>'),r="error";try{var i=JSON.parse(e.responseText);"undefined"!=typeof i.success&&!0===i.success&&"undefined"!=typeof i.data.paypal_redirect&&(window.location=i.data.paypal_redirect),"message"===(r="undefined"!=typeof i.success&&!0===i.success?"message":r)?(n.find(".user-registration-password-hint").remove(),n.find(".user-registration-password-strength").remove(),"admin_approval"==i.data.form_login_option?a.append("<li>"+u.user_under_approval+"</li>"):"email_confirmation"==i.data.form_login_option||"admin_approval_after_email_confirmation"==i.data.form_login_option?a.append("<li>"+u.user_email_pending+"</li>"):"payment"==i.data.form_login_option?a.append("<li>"+i.data.message+"</li>"):a.append((i.data.message,u.user_successfully_saved)),"undefined"!=typeof i.data.auto_password_generation_success_message&&a.append("<li>"+i.data.auto_password_generation_success_message+"</li>"),n[0].reset(),jQuery("#billing_country").trigger("change"),jQuery("#shipping_country").trigger("change"),void 0!==(t="undefined"!=typeof i.data.role_based_redirect_url?i.data.role_based_redirect_url:t)&&""!==t?window.setTimeout(function(){window.location=t},1e3):"undefined"!=typeof i.data.auto_login&&i.data.auto_login&&location.reload()):"error"===r&&("object"==typeof i.data.message?m.each(i.data.message,function(e,r){a.append("<li>"+r+"</li>")}):a.append("<li>"+i.data.message+"</li>"))}catch(s){a.append("<li>"+s.message+"</li>")}i=JSON.parse(e.responseText).data.success_message_positon;c.show_message(a,r,n,i),"1"===i?m(window).scrollTop(n.find(".ur-button-container").offset().top):m(window).scrollTop(n.closest(".ur-frontend-form").offset().top),m(document).trigger("user_registration_frontend_after_ajax_complete",[e.responseText,r,n]),n.find(".ur-submit-button").prop("disabled",!1)}}})}})})},edit_profile_event:function(){m("form.user-registration-EditProfileForm").on("submit",function(e){var s=m(this);m.extend(m.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields});var r,t=s.find(".ur-smart-phone-field");if("true"===t.attr("aria-invalid")){(r=t.closest("p.form-row")).find("#"+t.data("id")+"-error").remove();var a='<label id="'+t.data("id")+'-error" class="user-registration-error" for="'+t.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>";return r.append(a),r.find("#"+t.data("id")).attr("aria-invalid",!0),!0}if(1===s.find(".uraf-profile-picture-upload").find(".user-registration-error").length&&(t=s.find(".uraf-profile-picture-upload").find(".uraf-profile-picture-input"),(r=s.find(".uraf-profile-picture-upload")).find("#"+t.attr("name")+"-error").remove(),r.find(".uraf-profile-picture-file-error").remove(),t='<label id="'+t.attr("name")+'-error" class="user-registration-error" for="'+t.attr("name")+'">'+user_registration_params.message_required_fields+"</label>",r.find("button.wp_uraf_profile_picture_upload").after(t)),s.valid()){e.preventDefault(),s.find(".user-registration-submit-Button").prop("disabled",!0);e=s.find(".urfu-file-input");c.missing_attachment_handler(e);try{var i=c.get_form_data(),n=m("#profile_pic_url").val();i.push({value:n,field_name:"user_registration_profile_pic_url"}),i=JSON.stringify(i)}catch(o){i=""}i={action:"user_registration_update_profile_details",security:user_registration_params.user_registration_profile_details_save,form_data:i};s.find(".user-registration-submit-Button").find("span").addClass("ur-front-spinner"),m.ajax({type:"POST",url:user_registration_params.ajax_url,dataType:"JSON",data:i,complete:function(e){s.find("span.ur-front-spinner").removeClass("ur-front-spinner"),s.closest(".user-registration").find(".user-registration-error").remove(),s.closest(".user-registration").find(".user-registration-message").remove();var t=m('<ul class=""/>'),r="error";try{var a=JSON.parse(e.responseText);"undefined"!=typeof a.success&&!0===a.success&&(r="message"),"object"==typeof a.data.message?m.each(a.data.message,function(e,r){t.append("<li>"+r+"</li>")}):t.append("<li>"+a.data.message+"</li>")}catch(i){t.append("<li>"+i.message+"</li>")}c.show_message(t,r,s,"0"),s.find(".user-registration-submit-Button").prop("disabled",!1),m(window).scrollTop(m(".user-registration").position())}})}})}};c.init(),e.init()})},m(function(){m(".ur-submit-button").on("click",function(){m(this).closest("form.register").ur_form_submission()}),m(".user-registration-submit-Button").on("click",function(){m(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")&&"yes"===user_registration_params.ajax_submission_on_edit_profile&&m("form.user-registration-EditProfileForm").ur_form_submission()});var i={};m(document.body).on("click","#load_flatpickr",function(){var e,r,a=m(this).data("id"),t=i[a];t||(e=m(this).closest(".ur-field-item").find("#formated_date").val(),r=(0<m(".ur-frontend-form").length?m(".ur-frontend-form #"+a):m(".woocommerce-MyAccount-content #"+a)).attr("type","text").val(e),m(this).attr("data-date-format",r.data("date-format")),m(this).attr("data-mode",r.data("mode")),m(this).attr("data-min-date",r.data("min-date")),m(this).attr("data-max-date",r.data("max-date")),m(this).attr("data-default-date",e),t=m(this).flatpickr({disableMobile:!0,onChange:function(e,r,t){m("#"+a).val(r)}}),i[a]=t),t&&t.open()}),m(".ur-frontend-form").each(function(){m(this).find("form.register").on("focusout","#user_pass, #password_1",function(){$this=m(this);var e,r,t=m(this).attr("name"),a=m(this).data("id"),i=$this.closest("form").attr("data-enable-strength-password");"yes"!==i&&"1"!==i||(r=(e=$this.closest("form")).attr("data-minimum-password-strength"),i=[],(i="function"==typeof wp.passwordStrength.userInputDisallowedList?wp.passwordStrength.userInputDisallowedList():wp.passwordStrength.userInputBlacklist()).push(e.find('input[data-id="user_email"]').val()),i.push(e.find('input[data-id="user_login"]').val()),wp.passwordStrength.meter($this.val(),i)<r&&""!==$this.val()&&(e.find("#"+a+"_error").remove(),t='<label id="'+a+'_error" class="user-registration-error" for="'+t+'">'+u.password_strength_error+".</label>",e.find(".user-registration-password-hint").after(t)))})})}),m(function(){0<m(".user-registration-EditProfileForm.edit-profile .field-country").length&&m(".field-country").each(function(){var e=m(this).find(".ur-data-holder").data("option-value"),r=m(this).find(".ur-data-holder").data("option-html"),t=m(this).find("select");e&&r&&(0===t.find('option[value="'+e+'"]').length&&t.append("<option class='ur-remove' selected='selected' value='"+e+"'>"+r+"</option>"),m(this).on("click",function(){m(this).find(".ur-remove").remove()}))})})};m(function(){m(".input-checkbox").each(function(){var e=m(this).attr("data-id");m('input[name="'+e+'[]"]:checked').length==m('[data-id = "'+e+'" ]').length&&m('[data-check = "'+e+'" ]').prop("checked",!0)}),m('input[type="checkbox"]#checkall').on("click",function(){var e=m(this).attr("data-check");m('[data-id = "'+e+'" ]').prop("checked",m(this).prop("checked"))}),m(".input-checkbox").on("change",function(){var e=m(this).attr("data-id");!1===m(this).prop("checked")&&m('[data-check = "'+e+'" ]').prop("checked",!1),m('input[name="'+e+'[]"]:checked').length==m('[data-id = "'+e+'" ]').length&&m('[data-check = "'+e+'" ]').prop("checked",!0)})}),e(),m(window).on("load",function(){e()})}(jQuery),function(a){a(document).on("click",".password_preview",function(e){e.preventDefault();var r=user_registration_params.ursL10n,e=a(this).hasClass("dashicons-hidden")?"show":"hide",t=a(this).closest(".user-registration-form-row").find('input[name="password"]');if(0<(t=0===(t=0===(t=0===(t=0===(t=0===t.length?a(this).closest(".field-user_pass").find('input[name="user_pass"]'):t).length?a(this).closest(".field-user_confirm_password").find('input[name="user_confirm_password"]'):t).length?a(this).closest(".user-registration-form-row").find('input[name="password_current"]'):t).length?a(this).closest(".user-registration-form-row").find('input[name="password_1"]'):t).length?a(this).closest(".user-registration-form-row").find('input[name="password_2"]'):t).length)switch(e){case"show":t.attr("type","text"),a(this).removeClass("dashicons-hidden").addClass("dashicons-visibility"),a(this).attr("title",r.hide_password_title);break;case"hide":t.attr("type","password"),a(this).removeClass("dashicons-visibility").addClass("dashicons-hidden"),a(this).attr("title",r.show_password_title)}})}(jQuery);