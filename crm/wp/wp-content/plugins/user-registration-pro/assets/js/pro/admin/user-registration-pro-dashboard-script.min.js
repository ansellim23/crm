jQuery(function(l){var c={init:function(){this.dashboard_load_event()},dashboard_load_event:function(){l(document).ready(function(){l(".user-registration-pro-dashboard-select-form").trigger("change"),l(".user-registration-pro-date-switcher").on("click",function(){var r;l(this).hasClass("is-active")||(l(this).addClass("is-active"),r=l(this).attr("class").split(" ")[3],l(".user-registration-pro-date-switcher:not(."+r+")").removeClass("is-active"),l("#date-range-selector").val(""),l(".user-registration-pro-dashboard-select-form").trigger("change"))});var t={};l(".user-registration-pro-date-range-selector").on("click",function(){var r=l(this).data("id"),e=t[r];e||(e=l(this).flatpickr({mode:"range",disableMobile:!0,dateFormat:"Y-m-d","static":!0,onClose:function(r,e,t){0!==r.length&&(l(".user-registration-pro-date-switcher").removeClass("is-active"),e!==l(".user-registration-pro-date-checker").val()&&(l(".user-registration-pro-date-checker").val(e),l(".user-registration-pro-dashboard-select-form").trigger("change")))}}),t[r]=e),e&&e.open()})}),l(".user-registration-pro-dashboard-select-form").on("change",function(){var e="Week";l(".user-registration-pro-date-switcher").each(function(){var r=l("#date-range-selector").val();""!==r?e=r:l(this).hasClass("is-active")&&(e=l(this).html())});var n=l(this).val(),r={action:"user_registration_pro_dashboard_analytics",form_id:n,selected_date:e};l(".user-registration-pro-dashboard__body").html('<div class="user-registration-card ur-text-center"><div class="user-registration-card__body"><span class="ur-spinner"></span></div></div>'),l.ajax({url:user_registration_pro_dashboard_script_data.ajax_url,data:r,type:"POST",success:function(r){var e=r.data.message,r=r.data.user_report,t=r.weekly_data.daily_data;l(".user-registration-pro-dashboard__body").html(e),"all"===n&&c.specific_registration_source_chart(r);var e=l("#user-registration-pro-registration-overview-chart-report-area"),r=Object.keys(t),a=[],s=[],i=[],o=[];r.forEach(function(r){a.push(t[r].new_registration_in_a_day),s.push(t[r].approved_users_in_a_day),i.push(t[r].pending_users_in_a_day),o.push(t[r].denied_users_in_a_day)});r=new Chart(e,{type:"line",data:{datasets:[{label:"New User Registration",fill:!1,borderColor:"red",data:a},{label:"Approved Users",fill:!1,borderColor:"blue",data:s},{label:"Pending Users",fill:!1,borderColor:"#800020",data:i}],labels:r},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{ticks:{maxTicksLimit:10}}]},legendCallback:function(r){var e=[];e.push('<ul class="user-registration-pro-legend-'+r.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var t=0;t<3;t++)e.push('<li><span class="user-registration-pro-color-tag" style="background-color:'+r.data.datasets[t].borderColor+'"></span>'),r.data.datasets[t].label&&e.push(r.data.datasets[t].label),e.push("</li>");return e.push("</ul>"),e.join("")}}});l(".user-registration-total-registration-chart").find(".user-registration-pro-registration-overview-chart-report-legends").html(r.setDatasetVisibility(1,!0))}})})},specific_registration_source_chart:function(r){var e=r,r=l("#user-registration-pro-specific-form-registration-overview-chart-report-area"),t=Object.keys(e.specific_form_registration).sort(),a=[],s=[];t.forEach(function(r){a.push(e.specific_form_registration),s.push(e.specific_form_registration[r])});for(var i=[],o=0;o<t.length;o++)i.push(c.getRandomColor());r=new Chart(r,{type:"doughnut",data:{datasets:[{backgroundColor:i,data:s}],labels:t},options:{responsive:!0,legend:{display:!1},legendCallback:function(r){var e=[];e.push('<ul class="user-registration-pro-legend-'+r.id+' ur-d-flex ur-flex-wrap ur-mt-3 ur-mb-0">');for(var t=0;t<r.data.labels.length;t++)e.push('<li><span class="user-registration-pro-color-tag" style="background-color:'+r.data.datasets[0].backgroundColor[t]+'"></span>'),r.data.labels[t]&&e.push(r.data.labels[t]),e.push("</li>");return e.push("</ul>"),e.join("")}}});l(".user-registration-specific-registration-chart").find(".user-registration-pro-specific-form-registration-overview-chart-report-legends").html(r.setDatasetVisibility(1,!0))},getRandomColor:function(){for(var r="#",e=0;e<6;e++)r+="0123456789ABCDEF"[Math.floor(16*Math.random())];return r}};c.init(),l(".user-registration-pro-select-popup-type").ready(function(){"Login"===l("#select2-user_registration_pro_popup_type-container").attr("title")&&l(".single-registration-select").toggle()}),l(".user-registration-pro-select-popup-type").on("change",function(){l("#select2-user_registration_pro_popup_type-container").attr("title");l(this).closest("#mainform").find(".single-registration-select").toggle()})});